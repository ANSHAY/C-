class Solution {
public:
    int subarraySum(vector<int>& nums, int k) {
        if(nums.empty()) return 0;
        map<int, int> sums;
        int count=0;
        int cur = 0;
        for(int i=0; i<nums.size(); ++i){
            cur += nums[i];
            if(cur == k) count++;
            count += sums[cur-k];
            sums[cur]++;
        }
        return count;
    }
};
/* testcases
[1,1,1]
2
[]
7
[1]
1
[1]
5
[1,2]
1
[1,2]
2
[1,-1]
0
[1,-1]
1
[1,-1]
-1
[2,2,5,4,78,9,6,5,4,12,0,3,3,2,5,4,121,2,5,6,44,9,8,7,4,75,5,6,6,5,77,4,7,8,9,6,5,4,1,26,6,45,8,7,4,1,1,2,5,61,85,98,51,6,15,86,5,61,86,15,4,81,6,21,5,64,86,1,6,51,86,2,61,5,85,18,84,5,65,1,89,6,86,51,62,1,52,85,8,8,65,56,11,85,8,89,4,85,1,65,15,16,5,15,1,5,61,45,651,85,19,8,8,4,21,6,21,2,30,22,1,8,51,19,85,56,512]
345
*/
